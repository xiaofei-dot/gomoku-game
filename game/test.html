<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五子棋游戏测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
        }
        .pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <h1>五子棋游戏功能测试</h1>

    <div class="test-section">
        <h2>测试说明</h2>
        <p>此测试验证GitHub issue #1中提到的修复：</p>
        <ul>
            <li>平局检测功能</li>
            <li>游戏状态管理（游戏结束后禁用棋盘）</li>
            <li>获胜检测逻辑优化</li>
            <li>移动历史记录和撤销功能</li>
            <li>音效和动画效果</li>
            <li>移动有效性检查增强</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>手动测试步骤</h2>
        <ol>
            <li>打开 <a href="index.html" target="_blank">游戏页面</a></li>
            <li>测试平局检测：尝试填满整个棋盘（需要225步）</li>
            <li>测试获胜检测：放置5个连续棋子验证获胜检测</li>
            <li>测试游戏状态管理：游戏结束后尝试点击棋盘，应该无法放置棋子</li>
            <li>测试撤销功能：放置棋子后点击"撤销"按钮</li>
            <li>测试音效：放置棋子时应该听到音效</li>
            <li>测试获胜高亮：获胜时应该看到连线高亮效果</li>
            <li>测试重新开始功能：点击"重新开始"按钮重置游戏</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>代码验证</h2>
        <div id="test-results">
            <!-- 测试结果将通过JavaScript动态生成 -->
        </div>
    </div>

    <script>
        // 测试代码验证
        function runTests() {
            const results = [];

            // 测试1: 检查isBoardFull方法是否存在
            if (typeof GomokuGame === 'function') {
                const game = new GomokuGame();

                // 测试1.1: 检查isBoardFull方法
                if (typeof game.isBoardFull === 'function') {
                    results.push({
                        name: '平局检测方法存在',
                        status: 'pass',
                        message: 'isBoardFull方法已实现'
                    });
                } else {
                    results.push({
                        name: '平局检测方法存在',
                        status: 'fail',
                        message: 'isBoardFull方法未实现'
                    });
                }

                // 测试1.2: 检查disableBoard方法
                if (typeof game.disableBoard === 'function') {
                    results.push({
                        name: '禁用棋盘方法存在',
                        status: 'pass',
                        message: 'disableBoard方法已实现'
                    });
                } else {
                    results.push({
                        name: '禁用棋盘方法存在',
                        status: 'fail',
                        message: 'disableBoard方法未实现'
                    });
                }

                // 测试1.3: 检查checkWin方法
                if (typeof game.checkWin === 'function') {
                    results.push({
                        name: '获胜检测方法存在',
                        status: 'pass',
                        message: 'checkWin方法已实现'
                    });
                } else {
                    results.push({
                        name: '获胜检测方法存在',
                        status: 'fail',
                        message: 'checkWin方法未实现'
                    });
                }

                // 测试1.4: 检查移动历史记录
                if (game.moveHistory && Array.isArray(game.moveHistory)) {
                    results.push({
                        name: '移动历史记录',
                        status: 'pass',
                        message: '移动历史记录功能已实现'
                    });
                } else {
                    results.push({
                        name: '移动历史记录',
                        status: 'fail',
                        message: '移动历史记录功能未实现'
                    });
                }

                // 测试1.5: 检查撤销功能
                if (typeof game.undoMove === 'function') {
                    results.push({
                        name: '撤销功能',
                        status: 'pass',
                        message: '撤销功能已实现'
                    });
                } else {
                    results.push({
                        name: '撤销功能',
                        status: 'fail',
                        message: '撤销功能未实现'
                    });
                }

                // 测试1.6: 检查音效功能
                if (typeof game.playPlaceSound === 'function') {
                    results.push({
                        name: '音效功能',
                        status: 'pass',
                        message: '音效功能已实现'
                    });
                } else {
                    results.push({
                        name: '音效功能',
                        status: 'fail',
                        message: '音效功能未实现'
                    });
                }

                // 测试1.7: 检查获胜连线高亮
                if (typeof game.highlightWinningLine === 'function') {
                    results.push({
                        name: '获胜连线高亮',
                        status: 'pass',
                        message: '获胜连线高亮功能已实现'
                    });
                } else {
                    results.push({
                        name: '获胜连线高亮',
                        status: 'fail',
                        message: '获胜连线高亮功能未实现'
                    });
                }

            } else {
                results.push({
                    name: '游戏类存在',
                    status: 'fail',
                    message: 'GomokuGame类未定义'
                });
            }

            // 显示测试结果
            const container = document.getElementById('test-results');
            results.forEach(result => {
                const div = document.createElement('div');
                div.className = `test-result ${result.status}`;
                div.innerHTML = `
                    <strong>${result.name}:</strong>
                    <span>${result.message}</span>
                `;
                container.appendChild(div);
            });

            // 统计结果
            const passCount = results.filter(r => r.status === 'pass').length;
            const totalCount = results.length;

            const summary = document.createElement('div');
            summary.className = 'test-result';
            summary.style.backgroundColor = passCount === totalCount ? '#d4edda' : '#f8d7da';
            summary.innerHTML = `
                <strong>测试总结:</strong>
                ${passCount}/${totalCount} 测试通过
            `;
            container.appendChild(summary);
        }

        // 当页面加载完成后运行测试
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
</body>
</html>